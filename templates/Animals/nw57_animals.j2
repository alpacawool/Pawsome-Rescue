{% extends "nw57_layout.j2" %}

{# track current page #}
{% set active_page = 'animals' %}

{% block title %}Pawsome Animal Rescue - Animals{% endblock title %} 
{% block body_content %}

<script>
  // Show selected dropdowns based on
  // https://stackoverflow.com/questions/33413106
  $('.dropdown-menu a').click(function(){
    $('#selected').text($(this).text());
  });
</script>

<br>
<h1>Animals</h1>
<br>

{# Add filter options #}
<span> <b>Filter By: </b> </span>

<div class="btn-group">
  <button type="button" class="btn btn-secondary dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
    {% if current_shelter %}
      {{ current_shelter }}
    {% else %}  
      Shelter
    {% endif %}
  </button>
  <ul class="dropdown-menu">
    {% for shelter in distinct_shelters %}
        <li><a class="dropdown-item" href="/animals?shelter={{ shelter }}">{{ shelter }}</a></li>
    {% endfor %}
  </ul>
</div>

<div class="btn-group">
  <button type="button" class="btn btn-secondary dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
    {% if current_available %}
      {{ current_available }}
    {% else %}  
      Availability
    {% endif %}
  </button>
  <ul class="dropdown-menu">
    <li><a class="dropdown-item" href="/animals?available=Available">Available</a></li>
    <li><a class="dropdown-item" href="/animals?available=Adopted">Adopted</a></li>
  </ul>
</div>

<div class="btn-group">
  <button type="button" class="btn btn-secondary dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
    {% if current_species %}
      {{ current_species }}
    {% else %}  
      Species
    {% endif %}
  </button>
  <ul class="dropdown-menu">
    {% for species_type in distinct_species_type %}
        <li><a class="dropdown-item" href="/animals?species_type={{ species_type }}">{{ species_type }}</a></li>
    {% endfor %}
  </ul>
</div>

<a class="btn btn-secondary" href="/animals" role="button">None</a>

<br>
<br>

{# Add if/then for showing all animals or filtered animals #}

{% for animal in animals_data %}
    <div class="row justify-content-center">
        <div class="col-sm-8">
            <div class="card">
                <div class="row g-0">
                    <div class="col-md-4">
                        <img src="{{url_for('static', filename='img/'+ animal.image_url)}}" class="img-fluid rounded-start" alt="picture of animal">
                    </div>
                    <div class="col-md-8">
                        <div class="card-body">
                            <h5 class="card-title">{{animal.animal_name}}</h5>
                            <h6 class="card-subtitle mb-2 text-muted">{{animal.breed}} - {{animal.species_type}}</h6>
                            <p class="card-text">
                                <ul>
                                    <li>Personality: {{animal.personality}}</li>
                                    {% if animal.adopted_date %}
                                        <li>Adopted on: {{animal.adopted_date}}</li>
                                    {% else %}
                                        <li>Needs a Home! Learn More & Apply Below.</li>
                                    {% endif %}
                                </ul>
                            </p>
                            <p class="card-text"><small class="text-muted">Photo from <a href="https://unsplash.com/s/photos/cat-and-dog-pet?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText">Unsplash</a></small></p>
                            <a href="/animals/{{animal.id}}" class="card-link">Learn More About Me</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <br>
{% endfor %}

{% endblock body_content %}